## Ориентированные графы

### Задача о вирусном меме

Представим себе социальную сеть. В ней зарегистрированы пользователи, у каждого пользователя есть список людей, которым он пересылает мемы. Заметим, что если пользователь А пересылает мемы пользователю B, это необязательно значит, что пользователь B пересылает мемы пользователю А. Если пользователю прислали мем, то он его прочтёт ровно через 55 минут и через 5 минут отправит всем из своего списка людей, если до того его ни разу не отправлял.

Такие данные легко представить в виде ориентированного графа: вершинами будут люди, а из вершины A будет дуга в вершину B, если пользователь A пересылает мемы напрямую пользователю B. В коде реализован этот граф.

Перед нами стоит задача: нам дан такой социальный граф и номер пользователя, который увидел где-то какой-то мем и начал его пересылать. Каждый пользователь, который получил мем, также начал пересылать мемы. Нам нужно найти номер пользователя, который увидит впервые этот мем самым последним по времени. Если таковых несколько, подойдёт любой из них.

Например, пусть у нас есть 7 пользователей сети. Пользователь с номером 0 всегда пересылает мемы пользователям 1 и 3, а пользователь с номером 1 - пользователям 2 и 3. Если пользователь с номером 0 в 10:00 увидел мем и в 10:05 начнёт пересылать мемы, то:

1. 10:05. Пользователь 0 отправил мемы пользователю 1 и 3
2. 11:00. Пользователь 1 и 3 получили мем
3. 11:05. Пользователь 3 никому не отправляет мемы, а пользователь 1 отправил мемы пользователям 2 и 3.
4. 12:00. Пользователь 2 и 3 получили мем. Пользователь 2 получил его впервые, а пользователь 3 уже получал его на час раньше от пользователя 0. Пользователь 2 ни с кем не делится мемами, а пользователь 3 уже пересылал мем час назад, пересылки мема на этом закончились.

Кто когда впервые увидел мем:
| Пользователь | Когда впервые увидел мем |
| -- | -- |
| 0 | 10:00 |
| 1 | 11:00 |
| 2 | 12:00 |
| 3 | 11:00 |
| 4 | никогда |
| 5 | никогда |
| 6 | никогда |

Ответом к задаче на данном примере будет пользователь с номером 2.

Задача решается на основе обхода в ширину. Для этого сначала заводится массив меток - для каждой вершины будем хранить информацию о том, получал ли пользователь уже этот мем. Также заведём пустую очередь, в которую будем складывать пользователей.

Добавим в очередь стартового пользователя, который начнёт рассылку мемов. Пометим, что он уже видел мем.

Теперь будем поочерёдно доставать пользователей и для каждого добавлять в неё тех, кому он отправит мем, но за исключением тех людей, которые уже его видели. Тот пользователь, которого мы достанем из очереди последним (когда он не сможет никому отправить из тех, кто ещё не видел мем), и будет искомым ответом.

**Примечание.** Здесь даже не используется нигде информация о 55 и 5 минутах, это оказалось неважно. А вот если бы каждый пользователь отправлял или читал бы мемы с разной скоростью, то нам пришлось бы это использовать и решать через модифицированный алгоритм Дейкстры.
